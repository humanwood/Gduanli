<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>åˆä¼™äººæ”¶ç›Šè®¡ç®—å™¨ V3.3</title>
    <style>
        :root {
            --bg: #050a14;
            --card-bg: #111625;
            --primary: #00f2ea;
            --secondary: #2d6cdf;
            --gold: #ffbe0b;
            --up: #00d084;
            --text-main: #ffffff;
            --text-sub: #8b9bb4;
            --border: rgba(255,255,255,0.08);
            --input-bg: #0a0e1a;
            --accent-phase1: #ff6b6b;
            --accent-phase2: #51cf66;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Microsoft YaHei", sans-serif; }
        
        body { background-color: var(--bg); color: var(--text-main); padding: 15px; max-width: 600px; margin: 0 auto; min-height: 100vh; padding-bottom: 50px; }

        header { text-align: center; margin-bottom: 20px; padding: 15px 0; border-bottom: 1px solid var(--border); }
        header h1 { font-size: 22px; font-weight: 800; background: linear-gradient(90deg, #fff, var(--primary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        header p { font-size: 11px; color: var(--text-sub); margin-top: 5px; }

        /* Tabs */
        .tabs { display: flex; background: #1c2236; border-radius: 8px; padding: 4px; margin-bottom: 20px; border: 1px solid var(--border); }
        .tab-btn { flex: 1; text-align: center; padding: 12px; font-size: 14px; color: var(--text-sub); cursor: pointer; border-radius: 6px; transition: 0.3s; font-weight: 600; }
        .tab-btn.active { background: var(--secondary); color: #fff; box-shadow: 0 4px 12px rgba(45, 108, 223, 0.4); }

        .panel { display: none; animation: fadeIn 0.4s ease; }
        .panel.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Card */
        .card { background: var(--card-bg); border-radius: 16px; padding: 20px; margin-bottom: 15px; border: 1px solid var(--border); box-shadow: 0 8px 24px rgba(0,0,0,0.3); position: relative; overflow: hidden; }
        .card-head { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px dashed rgba(255,255,255,0.1); }
        .card-title { font-size: 15px; font-weight: bold; color: var(--primary); display: flex; align-items: center; gap: 6px; }

        /* Inputs */
        .input-group { margin-bottom: 18px; }
        .label-row { display: flex; justify-content: space-between; font-size: 13px; color: var(--text-sub); margin-bottom: 8px; }
        .input-wrap { position: relative; }
        input[type="number"], select { width: 100%; background: var(--input-bg); border: 1px solid var(--border); color: #fff; padding: 12px; border-radius: 8px; font-size: 16px; font-weight: bold; outline: none; transition: 0.3s; }
        input[type="number"]:focus { border-color: var(--secondary); }
        
        /* Range Slider */
        input[type=range] { width: 100%; -webkit-appearance: none; background: transparent; margin-top: 5px; }
        input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; height: 18px; width: 18px; border-radius: 50%; background: var(--secondary); margin-top: -7px; box-shadow: 0 0 8px rgba(45, 108, 223, 0.5); cursor: pointer; }
        input[type=range]::-webkit-slider-runnable-track { width: 100%; height: 4px; background: #333; border-radius: 2px; }

        /* Phase Box */
        .phase-box { background: rgba(255,255,255,0.03); border: 1px solid var(--border); border-radius: 12px; padding: 15px; margin-bottom: 12px; position: relative; overflow: hidden; }
        .phase-badge { position: absolute; top: 0; right: 0; padding: 4px 10px; font-size: 10px; font-weight: bold; border-bottom-left-radius: 8px; color: #fff; }
        .phase-1 { border-color: rgba(255, 107, 107, 0.3); }
        .phase-1 .phase-badge { background: var(--accent-phase1); }
        .phase-2 { border-color: rgba(81, 207, 102, 0.3); }
        .phase-2 .phase-badge { background: var(--accent-phase2); }
        
        /* Result Rows */
        .res-row { display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 6px; }
        .res-lbl { font-size: 12px; color: var(--text-sub); }
        .res-val { font-size: 15px; font-weight: bold; color: #fff; }
        .res-val.big { font-size: 18px; }

        /* VIP/Toggle Styles */
        .vip-selector { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; margin-bottom: 20px; }
        .vip-btn { background: #1c2236; border: 1px solid var(--border); padding: 12px 5px; border-radius: 8px; text-align: center; cursor: pointer; transition: 0.3s; }
        .vip-btn.selected { background: rgba(255, 190, 11, 0.15); border-color: var(--gold); }
        .vip-btn .t2 { font-size: 15px; color: #fff; font-weight: bold; display: block; margin-top: 4px; }
        .vip-btn.selected .t2 { color: var(--gold); }

        .switch-box { display: flex; align-items: center; justify-content: space-between; background: rgba(255,255,255,0.05); padding: 12px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.1); margin-bottom: 15px; cursor: pointer; transition: 0.3s; }
        .switch-box.active { background: rgba(0,242,234,0.1); border-color: rgba(0,242,234,0.3); }
        .toggle-btn { width: 40px; height: 20px; background: #333; border-radius: 10px; position: relative; transition: 0.3s; }
        .toggle-btn::after { content: ''; position: absolute; left: 2px; top: 2px; width: 16px; height: 16px; background: #666; border-radius: 50%; transition: 0.3s; }
        .switch-box.active .toggle-btn { background: var(--primary); }
        .switch-box.active .toggle-btn::after { left: 22px; background: #fff; }

        .unit { position: absolute; right: 12px; top: 13px; font-size: 12px; color: var(--text-sub); pointer-events: none; }
        
        /* New Summary Box */
        .summary-box { background: linear-gradient(135deg, rgba(45,108,223,0.1) 0%, rgba(0,242,234,0.1) 100%); border: 1px solid rgba(0,242,234,0.3); border-radius: 12px; padding: 15px; margin-top: 10px; }
        .summary-title { font-size: 13px; color: var(--primary); font-weight: bold; margin-bottom: 10px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 5px; }
    </style>
</head>
<body>

<header>
    <h1>åˆä¼™äººæ”¶ç›Šè®¡ç®—å™¨ V3.3</h1>
    <p>è‚¡ä¸œåŒè½¨åˆ†æ¶¦ | ç§å‹Ÿèµ„äº§å¢å€¼</p>
</header>

<div class="tabs">
    <div class="tab-btn active" onclick="switchTab('shareholder', this)">ğŸ‘‘ è‚¡ä¸œåˆä¼™äºº</div>
    <div class="tab-btn" onclick="switchTab('private', this)">ğŸš€ ç§å‹Ÿåˆä¼™äºº</div>
</div>

<div id="shareholder" class="panel active">
    
    <div class="card">
        <div class="card-head"><span class="card-title">âš™ï¸ ä¸šåŠ¡æ•°æ®æ¨¡å‹</span></div>
        
        <div class="input-group">
            <div class="label-row">
                <span>å®ä½“äº§å“æœˆé”€å”®é¢ </span>
                <span id="txt_product_sales" style="color:var(--primary)">100ä¸‡</span>
            </div>
            <input type="range" id="sl_product_sales" min="0" max="100000000" step="100000" value="1000000" oninput="calcShareholder()">
             <div class="label-row" style="margin-top:2px">
                <span style="font-size:10px; color:#666">0</span>
                <span style="font-size:10px; color:#666">1äº¿</span>
            </div>
        </div>

        <div class="input-group">
            <div class="label-row">
                <span>ç›²ç›’æ¯è½®æµæ°´ (æ¯48å°æ—¶)</span>
                <span id="txt_round_flow" style="color:var(--primary)">100ä¸‡</span>
            </div>
            <input type="range" id="sl_round_flow" min="1000000" max="100000000" step="1000000" value="1000000" oninput="calcShareholder()">
            <div class="label-row" style="margin-top:2px">
                <span style="font-size:10px; color:#666">100ä¸‡</span>
                <span style="font-size:10px; color:#666">1äº¿</span>
            </div>
            <div style="font-size:10px; color:#666; text-align:right; margin-top:2px;">*æ¯æœˆæŒ‰15è½®è®¡ç®—</div>
        </div>

        <div class="input-group">
            <div class="label-row">
                <span>äº§å“åˆ©æ¶¦ç‡è°ƒèŠ‚</span>
                <span id="txt_product_margin" style="color:var(--gold)">10%</span>
            </div>
            <input type="range" id="sl_product_margin" min="10" max="80" step="5" value="10" oninput="calcShareholder()">
            <div class="label-row" style="margin-top:2px">
                <span style="font-size:10px; color:#666">10%</span>
                <span style="font-size:10px; color:#666">80%</span>
            </div>
        </div>
        
        <div class="input-group" style="margin-bottom:0; border-top:1px dashed #333; padding-top:10px;">
             <div class="label-row">
                <span>è®¤è´­è‚¡æ•° (20ä¸‡/è‚¡)</span>
            </div>
            <div class="input-wrap">
                <input type="number" id="sh_shares" value="1" min="1" max="10" oninput="calcShareholder()">
                <span class="unit">è‚¡</span>
            </div>
        </div>
    </div>

    <div class="phase-box phase-1">
        <div class="phase-badge">é˜¶æ®µ 1 : æé€Ÿå›æœ¬æœŸ</div>
        <div style="margin-bottom:10px; font-size:11px; color:#bbb;">
            è§„åˆ™ï¼š<span style="color:#fff; font-weight:bold;">äº§å“é”€å”®æµæ°´</span> Ã— 0.5% (å›æœ¬å³æ­¢)<br>
            <span style="color:var(--accent-phase1);">*ç›²ç›’æµæ°´ä¸å‚ä¸æ­¤é˜¶æ®µå›æœ¬è®¡ç®—</span><br>
            <span style="color:var(--accent-phase1); font-weight:bold;">æ”¶ç›Šä¸Šé™: Â¥ <span id="res_phase1_cap">200,000</span> (æœ¬é‡‘)</span>
        </div>
        
        <div class="res-row">
            <span class="res-lbl">æœˆåº¦å›æœ¬é€Ÿåº¦</span>
            <span class="res-val big" id="res_phase1_monthly" style="color:var(--accent-phase1)">Â¥ 0</span>
        </div>
        <div class="res-row">
            <span class="res-lbl">é¢„è®¡å›æœ¬å‘¨æœŸ</span>
            <span class="res-val" id="res_roi_months" style="color:#fff">-- ä¸ªæœˆ</span>
        </div>
    </div>

    <div class="phase-box phase-2">
        <div class="phase-badge">é˜¶æ®µ 2 : é•¿æœŸåˆ©æ¶¦æœŸ</div>
        <div style="margin-bottom:10px; font-size:11px; color:#bbb;">
            è§„åˆ™ï¼š(ç›²ç›’åˆ©æ¶¦ + äº§å“åˆ©æ¶¦) Ã— 1%<br>
            <span style="color:#666">å¼€å¯å…¨ç”Ÿæ€åˆ©æ¶¦åˆ†çº¢</span>
        </div>

        <div class="res-row">
            <span class="res-lbl">æœˆåº¦çº¯åˆ©åˆ†çº¢</span>
            <span class="res-val big" id="res_phase2_monthly" style="color:var(--accent-phase2)">Â¥ 0</span>
        </div>
    </div>

    <div class="summary-box">
        <div class="summary-title">ğŸ“ˆ é¦–å¹´æ€»æ”¶ç›Šæ™ºèƒ½æ¨æ¼”</div>
        <div class="res-row">
            <span class="res-lbl">ç¬¬1å¹´é¢„è®¡æ€»åˆ°æ‰‹</span>
            <span class="res-val highlight" id="res_year1_total" style="color:var(--gold); font-size:20px;">Â¥ 0</span>
        </div>
        <div style="font-size:10px; color:#888; margin-top:5px; line-height:1.4;">
            è®¡ç®—é€»è¾‘: <span id="res_year1_logic">å›æœ¬æœŸæ”¶ç›Š + ç›ˆåˆ©æœŸæ”¶ç›Š</span>
        </div>
    </div>
</div>

<div id="private" class="panel">
    <div class="card">
        <div class="card-head"><span class="card-title">ğŸŒŸ é€‰æ‹©åˆä¼™äººæ¡£ä½</span></div>
        <div class="vip-selector">
            <div class="vip-btn selected" onclick="selectVip(1, this)">
                <span style="font-size:12px; color:#888">VIP 1</span>
                <span class="t2">Â¥ 3,000</span>
            </div>
            <div class="vip-btn" onclick="selectVip(2, this)">
                <span style="font-size:12px; color:#888">VIP 2</span>
                <span class="t2">Â¥ 10,000</span>
            </div>
            <div class="vip-btn" onclick="selectVip(3, this)">
                <span style="font-size:12px; color:#888">VIP 3</span>
                <span class="t2">Â¥ 50,000</span>
            </div>
        </div>

        <div class="switch-box active" id="early_bird_box" onclick="toggleEarlyBird()">
            <div>
                <div style="font-size:14px; color:#fff; font-weight:bold;">âœ¨ æ—©é¸Ÿä¼˜æƒ æœŸ (2026.2.13å‰)</div>
                <div style="font-size:11px; color:var(--primary); margin-top:2px;">æŒ‰48å…ƒ(6æŠ˜)é…é€èµ„äº§ | ä¸Šå¸‚ä»·80å…ƒ</div>
            </div>
            <div class="toggle-btn"></div>
        </div>
    </div>

    <div class="card" style="border-color: rgba(255, 190, 11, 0.3);">
        <div class="card-head">
            <span class="card-title" style="color:var(--gold)">ğŸ’° æŒæœ‰èµ„äº§æ¨æ¼”</span>
            <span style="font-size:11px; background:rgba(255,215,0,0.15); color:var(--gold); padding:2px 6px; border-radius:4px;" id="ticket_price_tag">é…ç¥¨ä»·: 48å…ƒ</span>
        </div>
        
        <div class="res-row">
            <span class="res-lbl">æŠ•å…¥èµ„é‡‘</span>
            <span class="res-val" id="pp_invest">Â¥ 3,000</span>
        </div>
        <div class="res-row">
            <span class="res-lbl">è·å¾—ç¥¨æ•° (æ•°å­—èµ„äº§)</span>
            <span class="res-val big" style="color:var(--gold)" id="pp_tickets">62.5 æš</span>
        </div>
        
        <div class="input-group" style="margin-top:15px; border-top:1px dashed #333; padding-top:10px;">
            <div class="label-row">
                <span>é¢„ä¼°æœªæ¥ç¥¨ä»· (ç›²ç›’åˆšéœ€æ¶ˆè€—)</span>
                <span id="future_price_txt" style="color:var(--primary); font-weight:bold;">120 å…ƒ</span>
            </div>
            <input type="range" id="future_price" min="80" max="500" step="10" value="120" oninput="calcPrivate()">
        </div>

        <div class="res-row" style="margin-top:10px;">
            <span class="res-lbl">æœªæ¥èµ„äº§æ€»ä»·å€¼</span>
            <span class="res-val big" id="future_total_val">Â¥ 7,500</span>
        </div>
        <div class="res-row">
            <span class="res-lbl">çº¯æŠ•èµ„æ”¶ç›Š</span>
            <span class="res-val" style="color:var(--up)" id="future_profit">+ Â¥ 4,500</span>
        </div>
        <div class="res-row">
            <span class="res-lbl">å›æŠ¥ç‡ (ROI)</span>
            <span class="res-val" id="future_roi">150%</span>
        </div>
    </div>
</div>

<script>
    const fmt = n => Math.floor(n).toLocaleString();
    const fmtWan = n => (n/10000).toFixed(0) + "ä¸‡";
    const $ = id => document.getElementById(id);

    /* --- è‚¡ä¸œè®¡ç®—é€»è¾‘ (V3.3 æ ¸å¿ƒä¼˜åŒ–) --- */
    function calcShareholder() {
        // 1. è·å–è¾“å…¥
        let shares = parseInt($('sh_shares').value) || 1;
        let roundFlow = parseFloat($('sl_round_flow').value) || 0; // æ¯è½®(2å¤©)
        let productSales = parseFloat($('sl_product_sales').value) || 0; // æœˆåº¦
        let productMarginRate = parseFloat($('sl_product_margin').value) / 100; // åˆ©æ¶¦ç‡

        // 2. è½¬æ¢ç›²ç›’æµæ°´ä¸ºæœˆåº¦ (æ¯2å¤©ä¸€è½® -> 15è½®/æœˆ)
        let monthlyBlindBoxFlow = roundFlow * 15;

        // UIæ˜¾ç¤ºæ›´æ–°
        $('txt_round_flow').innerText = fmtWan(roundFlow);
        $('txt_product_sales').innerText = fmtWan(productSales);
        $('txt_product_margin').innerText = (productMarginRate * 100).toFixed(0) + "%";

        const PRINCIPAL_PER_SHARE = 200000;
        const TOTAL_PRINCIPAL = shares * PRINCIPAL_PER_SHARE;

        // --- é˜¶æ®µ1ï¼šå›æœ¬æœŸ (V3.3 ä¿®æ”¹ï¼šä»…è®¡ç®—äº§å“é”€å”®æµæ°´) ---
        // è§„åˆ™ï¼šäº§å“é”€å”®æµæ°´ Ã— 0.5% Ã— è‚¡æ•°
        let phase1_speed_monthly = productSales * 0.005 * shares;
        
        // è®¡ç®—å›æœ¬æ‰€éœ€æ—¶é—´ (æœˆ)
        let roiMonths = phase1_speed_monthly > 0 ? (TOTAL_PRINCIPAL / phase1_speed_monthly) : 999;
        
        // --- é˜¶æ®µ2ï¼šç›ˆåˆ©æœŸ (ä¿æŒä¸å˜) ---
        // è§„åˆ™Aï¼šç›²ç›’åˆ©æ¶¦ = æœˆæµæ°´ Ã— 0.5% (ç‡ƒæ–™è´¹)
        // è§„åˆ™Bï¼šäº§å“åˆ©æ¶¦ = æœˆé”€å”® Ã— åˆ©æ¶¦ç‡ (10%~80%)
        // è‚¡ä¸œåˆ†çº¢ = (ç›²ç›’åˆ©æ¶¦ + äº§å“åˆ©æ¶¦) Ã— 1% Ã— è‚¡æ•°
        
        let blindBoxProfit = monthlyBlindBoxFlow * 0.005; // ç›²ç›’äº§ç”Ÿçš„çº¯åˆ©
        let productProfit = productSales * productMarginRate; // äº§å“äº§ç”Ÿçš„çº¯åˆ©
        let totalProfit = blindBoxProfit + productProfit;

        let phase2_income_monthly = totalProfit * 0.01 * shares;

        // --- æ™ºèƒ½æ¨æ¼”é¦–å¹´æ€»æ”¶ç›Š ---
        let year1_total = 0;
        let year1_logic_text = "";

        if (roiMonths < 12) {
            // æƒ…å†µAï¼šé¦–å¹´èƒ½å›æœ¬
            // æ”¶ç›Š = å…¨éƒ¨æœ¬é‡‘ + (å‰©ä½™æœˆä»½ * é˜¶æ®µ2åˆ©æ¶¦åˆ†çº¢)
            let remainingMonths = 12 - roiMonths;
            year1_total = TOTAL_PRINCIPAL + (remainingMonths * phase2_income_monthly);
            year1_logic_text = `å¿«é€Ÿå›æœ¬(${fmtWan(TOTAL_PRINCIPAL)}) + ${remainingMonths.toFixed(1)}ä¸ªæœˆçº¯åˆ©åˆ†çº¢`;
        } else {
            // æƒ…å†µBï¼šé¦–å¹´è¿˜åœ¨å›æœ¬è·¯ä¸Š
            // æ”¶ç›Š = æœˆå›æœ¬é€Ÿåº¦ * 12 (å°é¡¶ä¸ºæœ¬é‡‘)
            // ä¿®æ­£é€»è¾‘ï¼šå¦‚æœå›æœ¬æœŸå¾ˆæ…¢ï¼Œå°±æ˜¯æµæ°´åˆ†çº¢*12ã€‚
            let estimatedYear1 = phase1_speed_monthly * 12;
            if(estimatedYear1 > TOTAL_PRINCIPAL) estimatedYear1 = TOTAL_PRINCIPAL;
            
            year1_total = estimatedYear1;
            year1_logic_text = `12ä¸ªæœˆå¤„äºå›æœ¬æœŸ (è¿›åº¦ ${(year1_total/TOTAL_PRINCIPAL*100).toFixed(0)}%)`;
        }

        // --- æ¸²æŸ“ç»“æœ ---
        $('res_phase1_cap').innerText = fmt(TOTAL_PRINCIPAL);
        $('res_phase1_monthly').innerText = "Â¥ " + fmt(phase1_speed_monthly);
        
        if (roiMonths > 120) {
            $('res_roi_months').innerText = "> 10 å¹´";
        } else {
            $('res_roi_months').innerText = roiMonths.toFixed(1) + " ä¸ªæœˆ";
        }

        $('res_phase2_monthly').innerText = "Â¥ " + fmt(phase2_income_monthly);
        $('res_year1_total').innerText = "Â¥ " + fmt(year1_total);
        $('res_year1_logic').innerText = year1_logic_text;
    }

    /* --- ç§å‹Ÿè®¡ç®—é€»è¾‘ --- */
    let currentVip = 1;
    let isEarlyBird = true;
    const VIP_CONFIG = {
        1: { price: 3000 },
        2: { price: 10000 },
        3: { price: 50000 }
    };

    function selectVip(level, el) {
        currentVip = level;
        document.querySelectorAll('.vip-btn').forEach(b => b.classList.remove('selected'));
        el.classList.add('selected');
        calcPrivate();
    }

    function toggleEarlyBird() {
        isEarlyBird = !isEarlyBird;
        const box = $('early_bird_box');
        if (isEarlyBird) {
            box.classList.add('active');
        } else {
            box.classList.remove('active');
        }
        calcPrivate();
    }

    function calcPrivate() {
        let cfg = VIP_CONFIG[currentVip];
        let investAmount = cfg.price;
        let ticketCost = isEarlyBird ? 48 : 80;
        let ticketCount = investAmount / ticketCost;

        let futurePrice = parseFloat($('future_price').value);
        $('future_price_txt').innerText = futurePrice + " å…ƒ";

        let totalAssetValue = ticketCount * futurePrice;
        let profit = totalAssetValue - investAmount;
        let roi = (profit / investAmount) * 100;

        $('ticket_price_tag').innerText = `é…ç¥¨ä»·: ${ticketCost}å…ƒ`;
        $('pp_invest').innerText = "Â¥ " + fmt(investAmount);
        $('pp_tickets').innerText = ticketCount.toFixed(1) + " æš";

        $('future_total_val').innerText = "Â¥ " + fmt(totalAssetValue);
        $('future_profit').innerText = (profit >= 0 ? "+" : "") + "Â¥ " + fmt(profit);
        $('future_roi').innerText = roi.toFixed(0) + "%";
    }

    function switchTab(mode, el) {
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        el.classList.add('active');
        document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
        $(mode).classList.add('active');
    }

    // åˆå§‹åŒ–
    calcShareholder();
    calcPrivate();

</script>
</body>
</html>

